<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>한–베 단어 타자 퀴즈</title>

  <!-- PWA / iOS -->
  <meta name="theme-color" content="#1c2231" />
  <link rel="manifest" href="manifest.webmanifest" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

  <!-- Styles -->
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Header -->
  <header class="topbar">
    <h1 id="hTitle">한–베 단어 타자 퀴즈</h1>
    <div class="top-actions">
      <!-- UI 언어 토글 (KO ↔ VI) -->
      <button id="btnLang" class="lang">VI</button>
      <span class="badge" id="swStatus">오프라인 준비 안됨</span>
    </div>
  </header>

  <main class="wrap">
    <!-- 시작 섹션 -->
    <section class="panel">
      <h2 id="startSectionTitle">학습 시작</h2>
      <div class="grid2">
        <div>
          <label id="labelLessonSelect">과목 선택</label>
          <div id="lessonButtons" class="lesson-buttons" role="group" aria-label="과목 선택"></div>
          <div class="hintline" id="hintlineText">버튼을 눌러 과목을 켜거나 끄세요.</div>
        </div>
        <div>
          <label id="labelQCount">문항 수</label>
          <input id="qCount" type="number" min="1" value="20" />
          <label class="row"><input id="optRandom" type="checkbox" checked /> <span id="optRandomLabel">랜덤 출제</span></label>
          <label class="row"><input id="optStrict" type="checkbox" /> <span id="optStrictLabel">엄격 채점(공백/기호 불허)</span></label>
          <label class="row"><input id="optTimer" type="checkbox" /> <span id="optTimerLabel">타이머 표시</span></label>
          <button id="btnStart" class="primary">공부 시작</button>
        </div>
      </div>
    </section>

    <!-- 퀴즈 섹션 -->
    <section id="quiz" class="panel hidden" aria-live="polite">
      <div class="quizmeta">
        <div><span id="labelQuestionCounter">문항</span> <span id="cur">0</span>/<span id="total">0</span></div>
        <div><span id="labelAccuracy">정답률</span> <span id="acc">0%</span></div>
        <div id="timer" class="hidden">⏱ <span id="sec">0</span>s</div>
      </div>

      <!-- 좌측: 정답 제출 버튼 / 우측: 문제 -->
      <div class="quizrow">
        <div class="left-actions">
          <button id="btnSubmit" class="primary submit-left">정답 제출</button>
        </div>
        <div class="qbox">
          <div class="vi" id="viText">—</div>
          <div class="note" id="noteText"></div>
        </div>
      </div>

      <div class="ibox">
        <input
          id="answer"
          type="text"
          inputmode="text"
          placeholder="여기에 한국어 정답 입력"
          autocomplete="off"
          autocorrect="off"
          autocapitalize="off"
          spellcheck="false"
        />
      </div>

      <div class="actions">
        <button id="btnHint">힌트(초성)</button>
        <button id="btnPass">패스</button>
        <button id="btnShow">정답보기</button>
      </div>

      <!-- 문제별 보조 메시지(힌트 등). 정오답 토스트는 #toast 사용 -->
      <div id="feedback" class="feedback"></div>
    </section>

    <!-- 결과 섹션 -->
    <section id="result" class="panel hidden">
      <h2 id="resultTitle">결과</h2>
      <div class="grid2">
        <div>
          <p><span id="scoreLabel">점수</span>: <b id="score">0</b> / <span id="resultTotal">0</span></p>
          <p><span id="accuracyLabel">정답률</span>: <b id="resultAcc">0%</b></p>
        </div>
        <div>
          <h3 id="wrongTitle">오답 노트</h3>
          <ul id="wrongList"></ul>
        </div>
      </div>
    </section>

    <!-- 제출 기록 (하단 누적) -->
    <section id="historyPanel" class="panel">
      <div class="history-head">
        <h2 id="historyTitle">제출 기록</h2>
        <button id="btnClearHistory" class="ghost small">기록 비우기</button>
      </div>
      <ol id="historyList" class="history"></ol>
    </section>

    <footer class="foot">
      <small id="footerNote">오프라인 PWA · 데이터: 1–9과</small>
    </footer>
  </main>

  <!-- 비차단 정오답 토스트(3초 유지) -->
  <div id="toast" class="toast" role="status" aria-live="polite" aria-atomic="true"></div>

  <!-- (옵션) all.json이 없는 구버전 호환을 위한 메타. all.json을 쓰면 아래는 무시됩니다. -->
  <script>
    window.HV_LESSONS = [
      {"id":"01","title":"소개"},
      {"id":"02","title":"학교"},
      {"id":"03","title":"일상생활"},
      {"id":"04","title":"날짜와 요일"},
      {"id":"05","title":"하루 일과"},
      {"id":"06","title":"주말"},
      {"id":"07","title":"물건 사기"},
      {"id":"08","title":"음식"},
      {"id":"09","title":"집"}
    ];
  </script>

  <!-- App -->
  <script src="app.js"></script>
</body>
</html>
